{% extends "layout.html" %}

{% block body %}
<!--libs-->
<style>
    .styled-background {
        background-color: #ff7;
        color: black;
    }
</style>
<link rel="stylesheet" href="/static/js/lib/codemirror.css">
<link rel="stylesheet" href="/static/js/themes/hopscotch.css">
<script src="/static/js/lib/codemirror.js"></script>
<script src="/static/js/addon/search/searchcursor.js"></script>
<script src="/static/js/addon/selection/mark-selection.js"></script>
<script src="/static/js/addon/display/placeholder.js"></script>


<!--Body-->
<!--<div class="row">-->
<!--    <div class="jumbotron">-->
<!--        <h1>Navbar example</h1>-->
<!--        <p class="lead">This example is a quick exercise to illustrate how fixed to top navbar works. As you scroll,-->
<!--            it-->
<!--            will remain fixed to the top of your browser's viewport.</p>-->
<!--        <a class="btn btn-lg btn-primary" href="../../components/navbar/" role="button">View navbar docs &raquo;</a>-->
<!--    </div>-->
<!--</div>-->
<div class="row">
    <div class="col-md-3 container"><textarea></textarea></div>
    <div class="col-md-9 container">
        <form><textarea id="code" name="code" placeholder="Drag and Drop RTLOG file Here..."></textarea></form>
    </div>
</div>
<script>
    //document.addEventListener('DOMContentLoaded', () => {
        var editor = CodeMirror.fromTextArea(document.getElementById("code"), {
            lineNumbers: true,
            styleSelectedText: true
        });

        editor.setOption("theme","hopscotch");
        editor.setSize("100%",window.innerHeight - 100);

        //clear the editor, paste file
        editor.on("drop",function(editor,e) {
            if(e.dataTransfer.files.length !== 0) {
                editor.setValue("");
            }

            //prevent default drop event
            e.preventDefault();

            //read the file and send to editor
            var reader = new FileReader();
            reader.onload = function(){
                var text = reader.result;
                editor.setValue(text);
            };
            reader.readAsText(e.dataTransfer.files[0]);
        });

        editor.on("change",function(editor,e) {
            if(editor.getValue().substring(0,5) !== 'FHEAD')
                return
            editor.markText({line: 1, ch: 1}, {line: 1, ch: 5}, {className: "styled-background"});
        });

    //});
</script>
{% endblock %}
